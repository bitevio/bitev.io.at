import{m as D,o as T,bA as Y,aq as d,aF as L,as as i,at as s,f as l,V as m,E as c,B as Q,au as n,Q as _,C as S,a2 as g,ar as u}from"./index.4734a098.js";import{Q as p}from"./QSelect.5bd45bc2.js";import{Q as h,a as q,b as y}from"./QTabPanels.2f10d487.js";import{Q as H}from"./QTabs.ba9d9901.js";import{Q as j,a as k}from"./QTable.32dd0d7f.js";import{Q as N}from"./QPage.fb223cef.js";import{h as f}from"./moment.9709ab41.js";import{b as M}from"./route-block.b5bad31b.js";import"./QChip.063286c9.js";import"./QMenu.da3cea1f.js";import"./rtl.b51694b1.js";import"./touch.70a9dd44.js";//! moment.js locale configuration
var w=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,F=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,V=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,v=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];f.defineLocale("fr",{months:"janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre".split("_"),monthsShort:"janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.".split("_"),monthsRegex:V,monthsShortRegex:V,monthsStrictRegex:w,monthsShortStrictRegex:F,monthsParse:v,longMonthsParse:v,shortMonthsParse:v,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xE0] LT",nextDay:"[Demain \xE0] LT",nextWeek:"dddd [\xE0] LT",lastDay:"[Hier \xE0] LT",lastWeek:"dddd [dernier \xE0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(r,t){switch(t){case"D":return r+(r===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return r+(r===1?"er":"e");case"w":case"W":return r+(r===1?"re":"e")}},week:{dow:1,doy:4}});const R={class:"bg-lite"},x={class:"text-bold text-h6"},A={class:"q-py-sm"},P={class:"row q-col-gutter-lg"},U={class:"col-4"},C={class:"q-gutter-sm"},E={class:"col-4"},B={class:"q-gutter-sm"},W={class:"row q-col-gutter-sm"},$={class:"col-6"},I={class:"col-6"},O={class:"col-4"},z={class:"q-pt-sm"},G={class:"q-gutter-sm"},J={key:0},K={key:1},X={class:"q-pt-sm"},Z={class:"q-gutter-sm"},ee={key:0},le={key:1},ae={__name:"etats",setup(r){f.locale("fr"),console.log(f.locales());const t=D({loading:!1,tab:"h",openFilter:!1,columns:[{name:"employe",label:"Employes",align:"left",field:e=>e.employee.first_name+" "+e.employee.last_name},{name:"D\xE9partement",label:"D\xE9partement",align:"left"},{name:"action",label:"Action",align:"center",field:e=>e.action.value},{name:"date",label:"Date & Heure",align:"left",field:e=>f(e.datetime).format("dd DD , MMM YYYY -  HH:mm")},{name:"Retard",label:"Retard",align:"left"},{name:"Appareil",label:"Appareil",align:"left",field:e=>{var a;return((a=e.device)==null?void 0:a.name)||""}},{name:"code",label:"Motif (Code fonction) ",align:"left",field:e=>{var a,o;return e.function_code?((a=e==null?void 0:e.function_code)==null?void 0:a.code)+" - "+((o=e==null?void 0:e.function_code)==null?void 0:o.name):""}}],columnsf:[{name:"employe",label:"Employes",align:"left",field:e=>e.employee.first_name+" "+e.employee.last_name},{name:"Nbre de jour (Travail)",label:"Nbr de jour (Travail)",align:"left"},{name:"Nbre de jour (Travail)",label:"Nbr de jour (Repos)",align:"left"},{name:"Nbre de jour (Travail)",label:"Total heure (Travail)",align:"left"},{name:"",label:"",headerClasses:"bg-grey",classes:"bg-grey",headerStyle:{width:"1px"},style:{width:"1px"}},{name:"Nbre de ",label:"* Nbr d'heure (Retard)",align:"left"},{name:"Nbre",label:"* Nbr d'heure (Abscence)",align:"left"},{name:"Nbre de jour (Travail)",label:"* Total heure \xE9ffectu\xE9 (Travail)",align:"left"}],pointages:[]});T(()=>{b()});async function b(){t.loading=!0,t.pointages=await Y.findMany("controls",{include:{employee:!0,function_code:!0}}).then(e=>e).catch(e=>[]),t.loading=!1}return(e,a)=>(d(),L(N,{class:"q-pa-md bg-lite"},{default:i(()=>[s("fieldset",R,[s("legend",x,[l(m,{class:"bg-white text-black",icon:t.openFilter?"mdi-filter-plus":"mdi-filter-off",outline:"",dense:"",round:"",onClick:a[0]||(a[0]=o=>t.openFilter=!t.openFilter)},null,8,["icon"]),c(" Filtrer ")]),Q(s("div",A,[s("div",P,[s("div",U,[s("div",C,[s("div",null,[l(p,{outlined:"","stack-label":"",modelValue:e.model,"onUpdate:modelValue":a[1]||(a[1]=o=>e.model=o),options:e.options,label:"D\xE9partements / Services"},{prepend:i(()=>[l(n,{color:"black",name:"mdi-home"})]),_:1},8,["modelValue","options"])]),s("div",null,[l(p,{outlined:"","stack-label":"",modelValue:e.model,"onUpdate:modelValue":a[2]||(a[2]=o=>e.model=o),options:e.options,label:"Utilisateurs/Employes"},{prepend:i(()=>[l(n,{color:"black",name:"mdi-account-group"})]),_:1},8,["modelValue","options"])])])]),s("div",E,[s("div",B,[s("div",null,[l(p,{outlined:"","stack-label":"",modelValue:e.model,"onUpdate:modelValue":a[3]||(a[3]=o=>e.model=o),options:e.options,label:"Code de fonction"},{prepend:i(()=>[l(n,{color:"black",name:"mdi-circle"})]),_:1},8,["modelValue","options"])]),s("div",null,[s("div",W,[s("div",$,[l(_,{outlined:"","stack-label":"",modelValue:e.text,"onUpdate:modelValue":a[4]||(a[4]=o=>e.text=o),type:"datetime-local",label:"Date de d\xE9but"},null,8,["modelValue"])]),s("div",I,[l(_,{outlined:"","stack-label":"",modelValue:e.text,"onUpdate:modelValue":a[5]||(a[5]=o=>e.text=o),type:"datetime-local",label:"Date de fin"},null,8,["modelValue"])])])])])]),s("div",O,[s("div",null,[l(p,{outlined:"",modelValue:e.model,"onUpdate:modelValue":a[6]||(a[6]=o=>e.model=o),options:e.options,label:"Appareils"},{prepend:i(()=>[l(n,{color:"black",name:"las la-mobile"})]),_:1},8,["modelValue","options"])])])])],512),[[S,t.openFilter]])]),l(H,{class:"text-bold",modelValue:t.tab,"onUpdate:modelValue":a[7]||(a[7]=o=>t.tab=o)},{default:i(()=>[l(h,{icon:"mdi-apps",name:"h",label:"Historiques"}),l(h,{class:"text-red",icon:"las la-file-pdf",name:"f",label:"Fiches"})]),_:1},8,["modelValue"]),l(q,{modelValue:t.tab,"onUpdate:modelValue":a[10]||(a[10]=o=>t.tab=o)},{default:i(()=>[l(y,{name:"h"},{default:i(()=>[s("div",z,[l(j,{loading:t.loading,separator:"cell",flat:"",class:"scroll",rows:t.pointages,columns:t.columns,style:g({height:t.openFilter?"50vh":"65vh"})},{"top-right":i(()=>[s("div",G,[l(m,{color:"red",icon:"mdi-printer"}),l(m,{onClick:a[8]||(a[8]=o=>b()),color:"black",icon:"mdi-sync"})])]),"body-cell-action":i(o=>[l(k,{props:o},{default:i(()=>[o.value=="arrival"?(d(),u("span",J,[l(n,{color:"green",name:"mdi-circle"}),c(" Arriv\xE9e ")])):(d(),u("span",K,[l(n,{color:"red",name:"mdi-circle"}),c(" D\xE9part ")]))]),_:2},1032,["props"])]),_:1},8,["loading","rows","columns","style"])])]),_:1}),l(y,{name:"f"},{default:i(()=>[s("div",X,[l(j,{loading:t.loading,separator:"cell",flat:"",class:"scroll",rows:t.pointages,columns:t.columnsf,style:g({height:t.openFilter?"50vh":"65vh"})},{"top-right":i(()=>[s("div",Z,[l(m,{color:"red",icon:"mdi-printer"}),l(m,{onClick:a[9]||(a[9]=o=>b()),color:"black",icon:"mdi-sync"})])]),"body-cell-action":i(o=>[l(k,{props:o},{default:i(()=>[o.value=="arrival"?(d(),u("span",ee,[l(n,{color:"green",name:"mdi-circle"}),c(" Arriv\xE9e ")])):(d(),u("span",le,[l(n,{color:"red",name:"mdi-circle"}),c(" D\xE9part ")]))]),_:2},1032,["props"])]),_:1},8,["loading","rows","columns","style"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};typeof M=="function"&&M(ae);export{ae as default};
